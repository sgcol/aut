<?phpnamespace Api\Controller;use Think\Controller;class IndexController extends Controller{    public function _initialize()    {         $this->verifySign();    }    public function verifySign()    {        $datas = I('param.');        $secret = M('config')->where('id=1')->getField('jkmy');        // 验证参数中是否有签名        if (!isset($datas['sign']) || !$datas['sign']) {            $err = ['errno'=>100002,'message'=>'签名不存在'];            $error1['err'] = $err;			$this->ajaxReturn($error1);            exit();        }        $sign = $datas['sign'];        unset($datas['sign']);        ksort($datas);        $params = http_build_query($datas);        // $secret是通过key在api的数据库中查询得到        $sign2 = md5($params . $secret);        if ($sign != $sign2) {            $err = ['errno'=>100003,'message'=>'签名错误'];            $error2['err'] = $err;			$this->ajaxReturn($error2);            exit();        }    }}